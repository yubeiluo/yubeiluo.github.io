<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>



  <link href='http://fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext' rel='stylesheet' type='text/css'>


<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.3"/>




  <meta name="keywords" content="Hexo,next" />



  <link rel="alternate" href="/atom.xml" title="A passionate coder, footballer and dreamer" type="application/atom+xml" />



  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.3" />



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    analytics: {
      google: ''
    },
    sidebar: 'post'
  };
</script>




  <title> A passionate coder, footballer and dreamer </title>
</head>

<body>
  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->

  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <div id="header" class="header">
      <div class="header-inner">
        <h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand">
      <span class="logo">
        <i class="icon-logo"></i>
      </span>
      <span class="site-title">A passionate coder, footballer and dreamer</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<div class="site-nav">
  

  
    <ul id="menu" class="menu menu-left">
      
        
        <li class="menu-item menu-item-home">
          <a href="/">
            <i class="menu-item-icon icon-home"></i> <br />
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            <i class="menu-item-icon icon-categories"></i> <br />
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            <i class="menu-item-icon icon-archives"></i> <br />
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags">
            <i class="menu-item-icon icon-tags"></i> <br />
            Tags
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
<form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'YhsxbtDJ4n8y4FaBsD4g','2.0.0');
</script>

<div class="site-search-toggle"></div>
    </div>
  
</div>


      </div>
    </div>

    <div id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          
  <div id="posts" class="posts-expand">
    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2016/01/06/How-to-Create-A-Successful-GitLab-Workflow/">
                How-to-Create-A-Successful-GitLab-Workflow
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on 2016-01-06
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; In
            
              <a href="/categories/gitlab/">gitlab</a>

              
              
                , 
              

            
              <a href="/categories/gitlab/continuous-integration/">continuous integration</a>

              
              
                , 
              

            
              <a href="/categories/gitlab/continuous-integration/continuous-delivery/">continuous delivery</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2016/01/06/How-to-Create-A-Successful-GitLab-Workflow/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2016/01/06/How-to-Create-A-Successful-GitLab-Workflow/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <p>In this blog, I will walk you through the detailed steps that are required to setup a successful and efficient Git workflow powered by the modern, excellent open source software that I have ever used, <strong>GitLab</strong>. This workflow aims to achieve the following goals:</p>
<ul>
<li><p>Code Review. Force developers to form the habit of code review before code is accepted in the main line.</p>
</li>
<li><p>Continuous Integration. By default, every commit should trigger a build, which should include performing regression testing to discover failures earlier not later.</p>
</li>
<li><p>Continuous Delivery. Push to deploy should be in place to save the manual deploy effort.</p>
</li>
</ul>
<h1 id="Background">Background</h1><p>TL;DR</p>
<p>What on earth am I blogging this for? Well, since my Git story could date back to year 2013 and GitLab  to 2014. these are the real drivers for this blog:</p>
<ul>
<li><p>When I joined the <a href="https://18birdies.com/" target="_blank" rel="external">18birdies dev team</a> half a year ago, <a href="https://subversion.apache.org/" target="_blank" rel="external">SVN</a> is the only SCM tool being used for hosting the source code repositories of all the ongoing projects: iOS App, Android App, Server (Java), Web, etc. Ironically this is the same case for the previous <a href="http://www.mashanglc.com/" target="_blank" rel="external">company</a> that I worked for, where <a href="https://git-scm.com/" target="_blank" rel="external">Git</a> and <a href="https://gitlab.com/" target="_blank" rel="external">GitLab</a> were successfully introduced and popularized with my effort.</p>
</li>
<li><p>Last week, we had a new seasoned front-end developer on-board, another Git addict like me (glab to have a company). After some rounds of debate with CTO, he finally agreed that we should start to use Git in place of SVN, but before that, an appropriate development workflow or SDLC should be proposed and standardized so that all the different teams could conduct the development in a cohesive and consistent way.</p>
</li>
</ul>
<h1 id="Git">Git</h1><h2 id="Why">Why</h2><p>I have summarized as follows a list of reasons why Git should be used instead of SVN:</p>
<ul>
<li>Git is a <a href="https://en.wikipedia.org/wiki/Distributed_version_control" target="_blank" rel="external">DVCS</a>, which avoids the SPOF or single point of failure.</li>
<li>Git is branching friendly, where branching and merging is a very lightweight operation.</li>
<li><a href="https://en.wikipedia.org/wiki/Linus_Torvalds" target="_blank" rel="external">Linus</a> is Git’s author</li>
</ul>
<h2 id="Version_Control">Version Control</h2><p>There exists basically three types of version control systems:</p>
<ol>
<li>Local</li>
<li>Centralized</li>
<li>Distributed</li>
</ol>
<h3 id="Local">Local</h3><p><img src="/uploads/How-to-Create-A-Successful-GitLab-Workflow/screenshot-1.png" alt=""></p>
<p>One example is the <strong>RCS</strong> command that is available in major Linux distributions. Here is how RCS works:</p>
<ul>
<li>Calculating the diffs between each version</li>
<li>Storing the diffs or patches in a special format in disk</li>
<li>Re-recreate any file at any time by applying all the diffs since the initial version.</li>
</ul>
<p>Shortcomings:</p>
<ul>
<li>SPOF</li>
<li>Do Not scale</li>
</ul>
<h3 id="Centralized">Centralized</h3><p><img src="/uploads/How-to-Create-A-Successful-GitLab-Workflow/screenshot-2.png" alt=""></p>
<p>Examples are CVS, SVN, Perforce. And a typical one works like this:</p>
<ul>
<li>A single dedicated server that serves all the versioned files</li>
<li>A number of clients check out / in files from and to the server.</li>
</ul>
<p>Advantages over Local:</p>
<ul>
<li>There is communication among the team members since everyone knows to some extent what others are currently doing.</li>
<li>Authentication and Authorization. Admins could control what everyone could do.</li>
</ul>
<p>Flaws:</p>
<ul>
<li>SPOF. If the centralized server is down for some time, it becomes a blocker since nobody could do anything during the downtime: collaborate or save the changes. If the server’s disks become corrupted and there are no backups, the entire history of the project is lost.</li>
</ul>
<h3 id="Distributed">Distributed</h3><p><img src="/uploads/How-to-Create-A-Successful-GitLab-Workflow/screenshot-3.png" alt=""></p>
<p>Examples are Git, Mercurial, Bazaar. And the fundamental difference is that the clients not only checkout the latest snapshot of the files but also fully mirrors the remote repository. Therefore, it provides the following bonuses:</p>
<ul>
<li>Every clone is a full backup of all the data including the complete history</li>
<li>In case of server downtime, any of the client’s repository could be copied back to the server to restore it.</li>
<li>Client can work with multiple remote repositories simultaneously within the same project.</li>
</ul>
<h2 id="History">History</h2><p>The following list is a brief summary of Git’s history based on the <a href="http://git-scm.com/book/en/v2/Getting-Started-A-Short-History-of-Git" target="_blank" rel="external">official history page</a>:</p>
<ul>
<li>From 1991 to 2002, Linux Kernel were maintained via using patches.</li>
<li>In 2002, the project began to use a proprietary DVCS called BitKeeper.</li>
<li>In 2005, BitKeep started to charge the tool and the Linus Torvalds decided to develop their own tool based on the lessons learned when using BitKeeper with the following goals:<ol>
<li>Speed</li>
<li>Simple design</li>
<li>Strong support for non-linear development</li>
<li>Fully Distributed</li>
<li>Able to handle projects like the Linux Kernel efficiently (speed and data size)</li>
</ol>
</li>
</ul>
<h2 id="Basic_Concepts">Basic Concepts</h2><ol>
<li><p>Snapshots not differences.</p>
<p>Conceptually, most other systems store information as a list of file-based changes. These systems (CVS, Subversion, Perforce, Bazaar, and so on) think of the information they keep as a set of files and the changes made to each file over time.</p>
<p><img src="/uploads/How-to-Create-A-Successful-GitLab-Workflow/screenshot-4.png" alt=""></p>
<p>Git thinks of its data more like a set of snapshots of a miniature filesystem. Git thinks about its data more like a stream of snapshots.</p>
<p><img src="/uploads/How-to-Create-A-Successful-GitLab-Workflow/screenshot-5.png" alt=""></p>
</li>
<li><p>Nearly all operations are local.  </p>
</li>
<li><p>Git has integrity.</p>
</li>
<li><p>Git generally only add data.</p>
</li>
<li><p>The three states.</p>
<p><img src="/uploads/How-to-Create-A-Successful-GitLab-Workflow/screenshot-6.png" alt=""></p>
<p><img src="/uploads/How-to-Create-A-Successful-GitLab-Workflow/screenshot-7.png" alt=""></p>
<p>The basic workflow goes something like this:</p>
<ol>
<li>You modify files in your working directory.</li>
<li>You stage the files, adding snapshots of them to your staging area.</li>
<li>You do a commit, which takes the files as they are in the staging area and stores that snapshot permanently to your Git directory.</li>
</ol>
</li>
</ol>
<h2 id="Basic_Commands">Basic Commands</h2><ol>
<li><p>Each Git repository has a .git directory, which stores all the metadata about it, the history tree.</p>
<p><img src="/uploads/How-to-Create-A-Successful-GitLab-Workflow/screenshot-8.png" alt=""></p>
</li>
<li><p>Run <strong>git init</strong> to create a git repository in an existing directory.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> repo</span><br><span class="line">git init</span><br></pre></td></tr></table></figure>
</li>
<li><p>Run <strong>git clone</strong> to clone a remote repository (Make sure your ssh public keys are uploaded to the remote server).</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git@gitlab<span class="class">.squarevalleytech</span><span class="class">.com</span>:<span class="number">18</span>bidies-frontend/web.git</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="Configuration">Configuration</h3><p>Git stores its configuration in two places:</p>
<ul>
<li><p>~/.gitconfig (global, apply to all git repositories)</p>
</li>
<li><p>repo/.git/config (local, apply to local git repository, override the global one)</p>
</li>
<li><p>List the local configurations.</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config -<span class="keyword">l</span> --<span class="keyword">local</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>List the global configurations.</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config -<span class="keyword">l</span> --<span class="keyword">global</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Add a local configuration item.</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config user<span class="class">.name</span> davidyu</span><br><span class="line">git config user<span class="class">.email</span> davidyu@squarevalleytech.com</span><br></pre></td></tr></table></figure>
</li>
<li><p>Add a global configuration item.</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user<span class="class">.name</span> davidyu</span><br><span class="line">git config --global user<span class="class">.email</span> davidyu@squarevalleytech.com</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>Please go to the <a href="http://git-scm.com/docs/gittutorial" target="_blank" rel="external">official tutorial website</a> for an in-depth instructions about learning Git.</p>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2015/08/14/Lessons-Learned-Transition-to-Frontend/">
                Lessons-Learned-Transition-to-Frontend
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on 2015-08-14
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; In
            
              <a href="/categories/nodejs/">nodejs</a>

              
              
                , 
              

            
              <a href="/categories/nodejs/angular/">angular</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/08/14/Lessons-Learned-Transition-to-Frontend/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/14/Lessons-Learned-Transition-to-Frontend/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <p>It’s been almost a quarter since I joined the new team. For the recent month, all the efforts have been spent on the <strong>Mini ERP Project</strong> aiming to integrate internal workflows for increasing efficiency and boosting productivity. Proudly speaking, I have now transitioned to be a proficient front-end engineer within such a short period of time, so it is worth spending some more time in recording and more importantly summarizing the lessons learned in this unforgettable and challenging transition process.</p>
<h1 id="Facts_&amp;_Lessons">Facts &amp; Lessons</h1><ol>
<li><p>The first project is an existing one, developed by a seasoned front-end veteran, who was going to leave the team soon. The project was written in the <strong>MEAN</strong> stack using grunt as the build tool and helped enlighten me in various aspects of front-end engineering with enormous amount of working examples. The only cumbersome issue was that each time a new dependency was introduced, you had to manually wire them up in the main page, which obviously violates the <a href="https://en.wikipedia.org/wiki/Open/closed_principle" target="_blank" rel="external">OCP principle</a>. BTW, Java is my favorite programming language and I am obsessed with software design principles and practices with over 4 years experience of server side engineering, 1 year hands-on architectural experience.</p>
</li>
<li><p>As was told by many friends, Angular indeed has a very steep learning curve compared to other frameworks and it took me no less than two weeks before the angular way of thinking came into being in my mentality. However, once you get used to it, the previous pains totally paid off because you now have a damn powerful weapon added to your arsenal, which could help to solve many intricate problems in many cases with less code written. The core angular concepts are:</p>
<ul>
<li>Two-way data binding</li>
<li>Dependency injection,</li>
<li>Controllers</li>
<li>Services</li>
<li>Service providers</li>
<li>Scope and scope inheritance</li>
<li>Filters</li>
</ul>
<p>It is worth pointing out that you can not claim to be an Angular artisan unless you comprehend the inner workings of the directives and are capable of rolling out customized ones to suite your own use case.</p>
</li>
<li><p>GulpJs is a better build tool compared to GruntJs because of the following two reasons:</p>
<ul>
<li>It favors the concept of “coding over configuration”, which makes the code feel more explicit and readable, thus much easier for you to figure out what is going on.</li>
<li>It out-performs GruntJs by working in a streaming manner just like Unix pipes. In GulpJs, almost everything is performed in memory and no intermediary file storage is required, thus saving tremendous amount of disk-io related time.</li>
</ul>
</li>
<li><p><a href="https://github.com/Swiip/generator-gulp-angular" target="_blank" rel="external">Angular+GulpJs generator</a> is awesome in that you do not feel the hassle of wiring up dependencies manually in the main page any more since they are sorted out by the <a href="https://github.com/klei/gulp-angular-filesort" target="_blank" rel="external">angular-file-sort plugin</a>.</p>
</li>
<li><p>You should start way much earlier to experiment and prototype before the backend team kicks off and definitely do not wait until the backend API is ready. Nodejs + express could be leveraged to mock the real api and provide some fake data in order to make the whole workflow run.</p>
</li>
<li><p>Usability is important and you should always think from the perspective of the end users and make bold suggestions when necessary. Take the below comparison as an example:</p>
<ul>
<li><p>The origin detail page design</p>
<p><img src="/uploads/Lessons-Learned-Transition-to-Frontend/screenshot-5.png" alt=""></p>
</li>
<li><p>The proposed design</p>
<p><img src="/uploads/Lessons-Learned-Transition-to-Frontend/screenshot-4.png" alt=""></p>
<p>As you can see, since the detail page is very lengthy, it will be very handy for an left-side navigation bar to be present when users are scrolling around.</p>
</li>
</ul>
</li>
<li><p>You should have a consistent error handling process in place to make troubleshooting a straightforward and time-saving task when something goes wrong.</p>
<p><img src="/uploads/Lessons-Learned-Transition-to-Frontend/screenshot-6.png" alt=""></p>
</li>
</ol>
<h1 id="Finished_Product">Finished Product</h1><p>Although the product is far from being perfect, I still would like to show off some highlights.</p>
<p><img src="/uploads/Lessons-Learned-Transition-to-Frontend/screenshot-4.png" alt=""></p>
<p><img src="/uploads/Lessons-Learned-Transition-to-Frontend/screenshot-7.png" alt=""></p>
<p><img src="/uploads/Lessons-Learned-Transition-to-Frontend/screenshot-8.png" alt=""></p>
<p><img src="/uploads/Lessons-Learned-Transition-to-Frontend/screenshot-9.png" alt=""></p>
<p><img src="/uploads/Lessons-Learned-Transition-to-Frontend/screenshot-10.png" alt=""></p>
<p><img src="/uploads/Lessons-Learned-Transition-to-Frontend/screenshot-11.png" alt=""></p>
<h1 id="Conclusion">Conclusion</h1><p>It will be great if this long post will be of any use for other backend engineers who also feel tempted to give it a shot in the front-end arena.</p>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2015/07/08/Use-Css-After-Psuedo-Element-To-Center-Play-Icon/">
                Use Css After Psuedo Element To Center Play Icon
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on 2015-07-08
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; In
            
              <a href="/categories/css/">css</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/07/08/Use-Css-After-Psuedo-Element-To-Center-Play-Icon/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/07/08/Use-Css-After-Psuedo-Element-To-Center-Play-Icon/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <p>Today, I would like to share with you some css tricks that were discovered and learned in my own project, where they were employed to place a play icon in the middle of an image.</p>
<h1 id="Background">Background</h1><p>During my recent development of a web ui for managing the post library (user can see the list and perform actions on each of them), it is needed to render the UI based on the post type. For the post with attached video, it is required to display the <strong>play</strong> icon in the center of the video snapshot image that could be simply clicked by the user to play the video.</p>
<h1 id="Desired_Effect">Desired Effect</h1><p>One picture is worth than thousands words and here comes the snapshot.</p>
<p><img src="/uploads/Use-Css-After-Psuedo-Element-To-Center-Play-Icon/snapshot-1.png" alt=""></p>
<h1 id="Tricky_Things">Tricky Things</h1><p>In order to achieve the wanted functionality, it was not an easy task for me since I just re-picked up the web tech stack two months ago due to lack of labor and lots of stuff has changed dramatically.</p>
<p>The most unpleasant issue I feel with front-end development is the enormous details that one has to take care of, such as the gigantic css rules. And it is very likely to forget the technique that was previously used.</p>
<p>Next, I will talk about the facts and findings that were learned.</p>
<h2 id="CSS_Positions">CSS Positions</h2><p>There are four possible values for the css <strong>position</strong> property per the below table.</p>
<table>
<thead>
<tr>
<th style="text-align:left">Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">static</td>
<td>the default value</td>
</tr>
<tr>
<td style="text-align:left">relative</td>
<td>relative to the original position and will stay in the normal document structure</td>
</tr>
<tr>
<td style="text-align:left">absolute</td>
<td>relative to the first positioned parent element and will be removed from the document structure</td>
</tr>
<tr>
<td style="text-align:left">fixed</td>
<td>relative to the viewport and will stay in the normal document structure</td>
</tr>
</tbody>
</table>
<p>Please be noted that when positioned as absolute, the following statements hold true:</p>
<ol>
<li><p>The element will become an inline-block element and its width and height will auto-adjust to the contained elements.</p>
</li>
<li><p>The parent element will not any reserve space for it and therefore overlapping could occur.</p>
</li>
<li><p>The element will be positioned relative to the first positioned parent element that has the position property set to a value other than <strong>static</strong></p>
</li>
</ol>
<h2 id="Pseudo_Elements">Pseudo Elements</h2><p>What the hell are them? You may wonder the same as I did the first time when I heard the words. Actually, they are basically css rules like <strong>a:after,a:before</strong> that can 1) add more flexibility than plain javascript 2) remove unnecessary html code. Here are some facts to bear in mind.<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="rule"><span class="attribute">a</span>:<span class="value">before&#123;</span><br><span class="line">  display: block</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">40px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">content</span>:<span class="value"><span class="string">"the content will be inserted before the a's content"</span></span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ol>
<li><p>They do not appear in the DOM and are rendered by the css renderer. Henceforth, it is not possible to manipulate them via javascript.</p>
</li>
<li><p>The content property <strong>CAN NOT</strong> be missing.</p>
</li>
<li><p>The default display value is inline and can be modified to suit your needs.</p>
</li>
</ol>
<h1 id="The_Solution">The Solution</h1><p>Okay, it is time to put all the pieces together to have the whole picture.</p>
<p>First, the html markup:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"my-video-content"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">img</span> <span class="attribute">ng-src</span>=<span class="value">"&#123;&#123;feed.video.thumbnailUrl&#125;&#125;"</span> <span class="attribute">alt</span>=<span class="value">""</span> <span class="attribute">class</span>=<span class="value">"img-thumbnail"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"#"</span> <span class="attribute">ng-click</span>=<span class="value">"playVideo(feed)"</span>&gt;</span><span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>Secondly, the css styles:<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.my-video-content</span> <span class="rules">&#123;</span><br><span class="line">	<span class="rule"><span class="attribute">position</span>:<span class="value"> relative</span></span>;</span><br><span class="line">	<span class="rule"><span class="attribute">display</span>:<span class="value"> inline-block</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="class">.my-video-content</span> <span class="rule"><span class="attribute">a</span>:<span class="value">after &#123;</span><br><span class="line">	font-family: <span class="string">"Glyphicons Halflings"</span></span></span>;</span><br><span class="line">	<span class="rule"><span class="attribute">-webkit-font-smoothing</span>:<span class="value"> antialiased</span></span>;</span><br><span class="line">	<span class="rule"><span class="attribute">content</span>:<span class="value"> <span class="string">"\e029"</span></span></span>;</span><br><span class="line">	<span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">40px</span></span></span>;</span><br><span class="line">	<span class="rule"><span class="attribute">line-height</span>:<span class="value"> <span class="number">40px</span></span></span>;</span><br><span class="line">	<span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">40px</span></span></span>;</span><br><span class="line">	<span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">40px</span></span></span>;</span><br><span class="line">	<span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span></span>;</span><br><span class="line">	<span class="rule"><span class="attribute">top</span>:<span class="value"> <span class="number">50%</span></span></span>;</span><br><span class="line">	<span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">50%</span></span></span>;</span><br><span class="line">	<span class="rule"><span class="attribute">margin</span>:<span class="value"> -<span class="number">20px</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">20px</span></span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="Explanation">Explanation</h2><ol>
<li><p>The dimension of the video snapshot image is dynamic, so we need to have a container to have its width auto-adjust to that of the enclosed image. By default, the width of a div container will flow to 100% of its parent’s width and that is exactly where <strong>display=inline-block</strong> came to the rescue.</p>
</li>
<li><p>The <strong>.my-video-content a:after</strong> element is now positioned relative to the <strong>.my-video-content</strong> container and we also need to set both the top and left to 50% so that the left corner of the icon box is sitting in the middle of the image.</p>
</li>
<li><p>The goal is to center the icon box not the left corner, so we need to offset both the top and left margin to half of the icon’s height and width.</p>
</li>
</ol>
<h1 id="Conclusion">Conclusion</h1><p>Hopefully, the above tips could come to help and inspire your own development and please do not hesitate to correct me if anything I wrote above is wrong.</p>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2015/06/29/Winston-Rolling-File-Appender/">
                Winston Rolling File Appender
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on 2015-06-29
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; In
            
              <a href="/categories/nodejs/">nodejs</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/06/29/Winston-Rolling-File-Appender/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/06/29/Winston-Rolling-File-Appender/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <p><a href="https://github.com/winstonjs/winston" target="_blank" rel="external">Winston</a> is a great library for asynchronous logging in nodejs applications. It has the wonderful abstraction of transport where log messages will be delivered to and several built-in transports are provided out of the box per the below table (the list is incomplete).</p>
<table>
<thead>
<tr>
<th style="text-align:left">Transport Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Console</td>
<td>Log the messages in the console</td>
</tr>
<tr>
<td style="text-align:left">File</td>
<td>Log the messages in a file such as <strong>app.log</strong></td>
</tr>
<tr>
<td style="text-align:left">DailyRotateFile</td>
<td>Log the message in a file that rotates bases upon rules like the capped file size, date pattern</td>
</tr>
</tbody>
</table>
<p>For a production setup, you will find the <strong>DailyRotateFile</strong> transport useful since it could rotate your log files automatically based on the rules which are configurable.</p>
<h2 id="Problems">Problems</h2><p>If you follow the instructions outlined in the official winston repo, it is very likely that you will feel as surprised as I do. To summarize, here is a list of issues that make me feel uncomfortable sorted by the level from the most serious to the least.</p>
<h3 id="Message_Loss">Message Loss</h3><p>Yes!! You hear me, some messages will fail to be delivered to the log file. This is what exactly happened to my environment, where there are two transports configured, one is the <strong>Console</strong> and the other is the <strong>DailyRotateFile</strong>. After the app bootstraps, by comparing the messages between the console and the file, it is observed that some message will become lost in the file. Since logging is such as vital part of an application, how could you endure and afford the consequences of any message losses?</p>
<h3 id="Not_Tailer_Friendly">Not Tailer Friendly</h3><p>I admit that it is the OCD that helps to forge a habit that every time before an app is run, I will open another terminal to tail the app log file to see if everything goes on smoothly as expected and this command is often an alias defined in the bash profile such as</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> app.log=tail <span class="operator">-f</span> <span class="variable">$APP_HOME</span>/logs/app.log</span><br></pre></td></tr></table></figure>
<p>But when using the <strong>DailyRotateFile</strong> transport, the file name is dynamic according to the configured rules. The default value is the configured file name plus the current date suffix in the <strong>yyyy-mm-dd</strong> format like <strong>app.2015-06-29.log</strong>.</p>
<p>The problem with this is that there is no way to define a permanent alias to tail the log file since the file name changes and it would be handy if the transport could produce a file that never changes its name but still contains the latest log messages.</p>
<p>What about a symbolic link file that always links to the up-to-date log file and changes as well when the underlying file changes?</p>
<h2 id="Solution">Solution</h2><p>After reading the source code of winston, I have decided to fork the <a href="https://github.com/mallocator/Winston-Rolling-File-Appender" target="_blank" rel="external">Winston-Rolling-File-Appender</a> and roll out my own version of <strong>DailyRotateFile</strong> transport. Please go to <a href="https://github.com/yubeiluo/Winston-Rolling-File-Appender" target="_blank" rel="external">Another-Winston-Rolling-File-Appender</a> for furthur details about this little tranport that makes my life eaiser. Hopefully it could help you as well if by any chance you are suffering from the same issues.</p>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
  </div>

  

        </div>

        
      </div>


      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <div id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      <div class="site-overview">
        <div class="site-author motion-element">
          <img class="site-author-image" src="/uploads/avatar.jpg" alt="David Yu" />
          <p class="site-author-name">David Yu</p>
        </div>
        <p class="site-description motion-element"></p>
        <div class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">4</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">6</span>
              <span class="site-state-item-name">categories</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">2</span>
              <span class="site-state-item-name">tags</span>
              </a>
          </div>

        </div>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml">
              <i class="menu-item-icon icon-feed"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
              <a href="https://github.com/yubeiluo" target="_blank">github</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="https://twitter.com/yubeiluo" target="_blank">twitter</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="http://weibo.com/yubeiluo" target="_blank">weibo</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="http://www.douban.com/people/yubeiluo" target="_blank">douban</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="http://www.zhihu.com/people/yubeiluo" target="_blank">zhihu</a>
            </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>
        
      </div>

      

    </div>
  </div>


    </div>

    <div id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; &nbsp;  2015 - 
  2016
  <span class="with-love">
    <i class="icon-heart"></i>
  </span>
  <span class="author">David Yu</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </div>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.3"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.3"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.3" id="motion.global"></script>



  <script type="text/javascript" src="/js/search-toggle.js"></script>

  

  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
    });
  </script>

  

  
  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"yubeiluo"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  


  
  

</body>
</html>
